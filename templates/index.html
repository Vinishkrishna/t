<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <meta name="description" content="Professional translation management tool with automatic translation generation"/>
  <title>Translation Management Tool - TMT</title>
  <link rel="stylesheet" href="/static/css/styles.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸŒ</text></svg>">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="top">
      <div>
        <h1>ğŸŒ TMT â€“ Translation Management Tool</h1>
        <p class="muted">
          Add translation keys, auto-translate to multiple languages, and manage your i18n workflow efficiently.
          <span style="color:#7c3aed">âš¡ Powered by Google Translate API</span>
        </p>
      </div>
      <div class="top-actions">
        <button id="exportBtn" class="btn btn-ghost" title="Export all translations as JSON">
          ğŸ“¥ Export JSON
        </button>
      </div>
    </header>

    <!-- Main Card -->
    <main class="card">
      <!-- Tabs Navigation -->
      <nav class="tabs">
        <button class="tab active" data-tab="add" title="Add new translation">
          â• Add Translation
        </button>
        <button class="tab" data-tab="manage" title="Manage existing translations">
          ğŸ“‹ Manage Translations
        </button>
        <button class="tab" data-tab="languages" title="Configure languages">
          ğŸŒ Languages
        </button>
      </nav>

      <!-- Tab: Add Translation -->
      <section id="tab-add" class="tab-panel active">
        <div class="form-grid">
          <!-- Translation Key -->
          <div>
            <label for="translationKey">
              Translation Key
              <small class="muted">e.g., HOME_TITLE, BUTTON_SUBMIT</small>
            </label>
            <input 
              id="translationKey" 
              type="text"
              placeholder="HOME_TITLE" 
              autocomplete="off"
              spellcheck="false">
          </div>

          <!-- English Value -->
          <div>
            <label for="englishValue">
              English Value
              <small class="muted">Source text for translation</small>
            </label>
            <textarea 
              id="englishValue" 
              placeholder="Welcome to our dashboard"
              rows="4"></textarea>
          </div>

          <!-- Language Selection -->
          <div style="grid-column: 1 / -1;">
            <label>
              Target Languages
              <small class="muted">Select languages to generate (leave empty for all)</small>
            </label>
            <div class="dropdown-container">
              <div id="langDropdown" class="dropdown-header">
                ğŸŒ Select target languages â–¼
              </div>
              <div id="langDropdownMenu" class="dropdown-menu"></div>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="actions">
            <button id="generateBtn" class="btn btn-primary" title="Generate translations and save">
              âœ¨ Generate & Save
            </button>
            <button id="clearBtn" class="btn btn-secondary" title="Clear form">
              ğŸ—‘ï¸ Clear Form
            </button>
          </div>
        </div>

        <!-- Generated Translation Preview -->
        <div id="generatedArea" class="mt-16"></div>
      </section>

      <!-- Tab: Manage Translations -->
      <section id="tab-manage" class="tab-panel">
        <!-- Toolbar -->
        <div class="toolbar">
          <input 
            id="searchInput" 
            type="search"
            placeholder="ğŸ” Search by key or value... (Ctrl+K)"
            autocomplete="off">
          <div style="display:flex; gap:8px; align-items:center">
            <select id="sortBy" title="Sort by">
              <option value="key">Sort: Key</option>
              <option value="created_at">Sort: Created</option>
              <option value="updated_at">Sort: Updated</option>
            </select>
            <select id="orderBy" title="Order">
              <option value="asc">â†‘ Ascending</option>
              <option value="desc">â†“ Descending</option>
            </select>
            <button id="searchBtn" class="btn btn-primary" title="Search translations">
              ğŸ” Search
            </button>
          </div>
        </div>

        <!-- Translations List -->
        <div id="translationsList" class="list mt-12"></div>

        <!-- Pagination -->
        <div id="pagination" class="mt-8" style="display:flex; gap:6px; flex-wrap:wrap; justify-content:center"></div>
      </section>

      <!-- Tab: Languages -->
      <section id="tab-languages" class="tab-panel">
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:24px">
          <!-- Existing Languages -->
          <div>
            <label style="font-weight:700; margin-bottom:12px; display:block">
              ğŸŒ Configured Languages
            </label>
            <div id="languagesList" class="language-list"></div>
          </div>

          <!-- Add New Language -->
          <div>
            <label style="font-weight:700; margin-bottom:12px; display:block">
              â• Add New Language
            </label>
            
            <div style="margin-bottom:16px">
              <label for="standardLangSelect" style="font-size:13px; color:#64748b; margin-bottom:6px; display:block">
                Quick Select (Standard Languages)
              </label>
              <select id="standardLangSelect" style="width:100%">
                <option value="">-- Select a standard language --</option>
              </select>
            </div>

            <div style="margin-bottom:12px">
              <label for="languageCode" style="font-size:13px; color:#64748b; margin-bottom:6px; display:block">
                Language Code
              </label>
              <input 
                id="languageCode" 
                type="text"
                placeholder="e.g., de, pt, ja, zh-CN"
                autocomplete="off"
                spellcheck="false"
                style="text-transform:lowercase">
              <small class="muted" style="display:block; margin-top:4px">
                ISO 639-1 code (e.g., en, es, fr, de)
              </small>
            </div>

            <div style="margin-bottom:16px">
              <label for="languageName" style="font-size:13px; color:#64748b; margin-bottom:6px; display:block">
                Language Name
              </label>
              <input 
                id="languageName" 
                type="text"
                placeholder="e.g., German, Portuguese, Japanese"
                autocomplete="off">
            </div>

            <button id="addLanguageBtn" class="btn btn-primary" style="width:100%" title="Add new language">
              âœ… Add Language
            </button>

            <div style="margin-top:16px; padding:12px; background:#f0f9ff; border-radius:8px; font-size:13px; color:#0369a1">
              <strong>ğŸ’¡ Note:</strong> Adding a language will automatically translate all existing keys to the new language using Google Translate.
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="foot muted">
      Built with â¤ï¸ using Flask â€¢ Google Translate API â€¢ MongoDB
      <span style="margin:0 8px">â€¢</span>
      <a href="/health" target="_blank" style="color:#7c3aed; text-decoration:none">System Health</a>
      <span style="margin:0 8px">â€¢</span>
      Keyboard shortcuts: <kbd>Ctrl+K</kbd> Search, <kbd>Ctrl+N</kbd> New
    </footer>
  </div>

  <!-- Toast Notification -->
  <div id="toast" class="toast"></div>

  <!-- Scripts -->
  <script src="/static/js/main.js"></script>
</body>
</html>